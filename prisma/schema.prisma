generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum FormFieldType {
  CHECKBOX
  RADIO
  TEXTAREA
  INPUT
  FILE
  TABLE
  SENTENCE
  DATE
}

model users {
  id        Int       @id @default(autoincrement())
  name      String
  email     String    @unique
  password  String
  // role      Role     @default(USER)
  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt
  deletedAt DateTime?
}

model Form {
  id           Int            @id @default(autoincrement())
  name         String //@db.VarChar(40)
  prefix       String //@db.VarChar(10)
  desc         String         @db.Text
  createdAt    DateTime       @default(now())
  updatedAt    DateTime       @updatedAt
  deletedAt    DateTime?
  documentId   String
  document     Attachments    @relation(fields: [documentId], references: [id])
  FormSections FormSections[]
}

model FormFieldSchema {
  id            String    @id @default(uuid())
  label_content String
  type          String?
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt
  deletedAt     DateTime?
}

model FormSections {
  id          String      @id @default(uuid())
  name        String
  prefix      String
  order       Int
  description String?
  createdAt   DateTime    @default(now())
  updatedAt   DateTime    @updatedAt
  deletedAt   DateTime?
  formId      Int
  form        Form        @relation(fields: [formId], references: [id])
  FormField   FormField[]
}

model FormField {
  id            String        @id @default(uuid())
  name          String
  mapperName    String?
  orderNumber   Int
  type          FormFieldType
  required      Boolean       @default(false)
  createdAt     DateTime      @default(now())
  updatedAt     DateTime      @updatedAt
  deletedAt     DateTime?
  formSectionId String
  formSection   FormSections  @relation(fields: [formSectionId], references: [id])
}

model Attachments {
  id           String    @id @default(uuid())
  name         String
  originalName String
  path         String
  url          String
  mimeType     String
  size         Int?
  createdAt    DateTime  @default(now())
  updatedAt    DateTime  @updatedAt
  deletedAt    DateTime?
  Form         Form[]
}
